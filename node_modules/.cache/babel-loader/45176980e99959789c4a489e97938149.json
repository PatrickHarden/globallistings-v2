{"ast":null,"code":"import _classCallCheck from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/zentoo/Code/v2/src/views/plp/plp-container.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchProperties as _fetchProperties } from '../../redux/actions/searchProperties';\nimport { navigateToProperty } from '../../redux/actions/navigation';\nimport { PLP } from './plp';\nimport { propertiesSearchResultsSelector, resultCountSelector } from '../../redux/selectors/property-search-results';\nimport { conditionalFiltersSelector } from '../../redux/selectors/view-filters';\nimport { locationSelector } from '../../redux/selectors/state';\nimport { plpPropertyRequestStatus as plpPropertyRequestStatusSelector } from '../../redux/selectors/plp';\nimport { locationLookupSuggestionsSelector, initialSearchLocationSelector } from '../../redux/selectors/search';\nimport { lookupPlaceByName } from '../../redux/actions/autocomplete-request';\nimport { handleFilterChange } from '../../redux/actions/filter';\nimport { updateUrlWithSelectedLocation } from '../../redux/actions/autocomplete';\nimport { areaSelector } from '../../redux/selectors/area';\nimport { onPinClicked as _onPinClicked } from '../../redux/actions/map';\nimport { onPropertyEnter, onPropertyLeave } from '../../redux/actions/list';\nexport var PlpContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(PlpContainer, _React$Component);\n\n  var _super = _createSuper(PlpContainer);\n\n  function PlpContainer() {\n    _classCallCheck(this, PlpContainer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PlpContainer, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var newSearch = this.props.location.search;\n      var newPath = this.props.location.pathname;\n\n      if (newSearch !== prevProps.location.search || newPath !== prevProps.location.pathname) {\n        this.props.fetchProperties();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchProperties();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(PLP, Object.assign({}, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 12\n        }\n      }));\n    }\n  }]);\n\n  return PlpContainer;\n}(React.Component);\nexport var mapStateToProps = function mapStateToProps(state) {\n  return {\n    area: areaSelector(state),\n    filters: conditionalFiltersSelector(state),\n    initialSearchLocation: initialSearchLocationSelector(state),\n    location: locationSelector(state),\n    properties: propertiesSearchResultsSelector(state),\n    resultCount: resultCountSelector(state),\n    status: plpPropertyRequestStatusSelector(state),\n    suggestions: locationLookupSuggestionsSelector(state)\n  };\n};\nexport var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changePlaceSearch: function changePlaceSearch(searchTerm) {\n      return dispatch(lookupPlaceByName(searchTerm));\n    },\n    fetchProperties: function fetchProperties() {\n      return dispatch(_fetchProperties());\n    },\n    goToProperty: function goToProperty(id) {\n      return dispatch(navigateToProperty(id));\n    },\n    onFilterChange: function onFilterChange(name) {\n      return function (val, modifier) {\n        return dispatch(handleFilterChange(name, val, modifier));\n      };\n    },\n    onLocationChange: function onLocationChange(value) {\n      return dispatch(updateUrlWithSelectedLocation(value));\n    },\n    onPinClicked: function onPinClicked(id) {\n      return dispatch(_onPinClicked(id));\n    },\n    onListPropertyEnter: function onListPropertyEnter(id) {\n      return dispatch(onPropertyEnter(id));\n    },\n    onListPropertyLeave: function onListPropertyLeave(id) {\n      return dispatch(onPropertyLeave(id));\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(PlpContainer);","map":{"version":3,"names":["React","connect","fetchProperties","navigateToProperty","PLP","propertiesSearchResultsSelector","resultCountSelector","conditionalFiltersSelector","locationSelector","plpPropertyRequestStatus","plpPropertyRequestStatusSelector","locationLookupSuggestionsSelector","initialSearchLocationSelector","lookupPlaceByName","handleFilterChange","updateUrlWithSelectedLocation","areaSelector","onPinClicked","onPropertyEnter","onPropertyLeave","PlpContainer","prevProps","newSearch","props","location","search","newPath","pathname","Component","mapStateToProps","state","area","filters","initialSearchLocation","properties","resultCount","status","suggestions","mapDispatchToProps","dispatch","changePlaceSearch","searchTerm","goToProperty","id","onFilterChange","name","val","modifier","onLocationChange","value","onListPropertyEnter","onListPropertyLeave"],"sources":["/Users/zentoo/Code/v2/src/views/plp/plp-container.tsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Location } from 'history';\nimport { State, LoadStatus } from '../../types/state';\nimport { fetchProperties } from '../../redux/actions/searchProperties';\nimport { navigateToProperty } from '../../redux/actions/navigation';\nimport { PLP } from './plp';\nimport {\n  PropertyOverview,\n  propertiesSearchResultsSelector,\n  resultCountSelector,\n} from '../../redux/selectors/property-search-results';\nimport { FilterInfo } from '../../redux/selectors/config/filters';\nimport { conditionalFiltersSelector } from '../../redux/selectors/view-filters';\nimport { locationSelector } from '../../redux/selectors/state';\n\nimport { plpPropertyRequestStatus as plpPropertyRequestStatusSelector } from '../../redux/selectors/plp';\nimport {\n  locationLookupSuggestionsSelector,\n  initialSearchLocationSelector,\n  AutocompleteSuggestion,\n} from '../../redux/selectors/search';\nimport { lookupPlaceByName } from '../../redux/actions/autocomplete-request';\nimport { handleFilterChange } from '../../redux/actions/filter';\nimport { FilterModifier } from '../../types/config';\nimport { updateUrlWithSelectedLocation } from '../../redux/actions/autocomplete';\nimport { Area, areaSelector } from '../../redux/selectors/area';\nimport { onPinClicked } from '../../redux/actions/map';\nimport { onPropertyEnter, onPropertyLeave } from '../../redux/actions/list';\n\ninterface StateProps {\n  readonly area: Area;\n  readonly filters: FilterInfo[];\n  readonly initialSearchLocation?: string;\n  readonly location: Location;\n  readonly properties: PropertyOverview[];\n  readonly resultCount: string;\n  readonly status: LoadStatus;\n  readonly suggestions: AutocompleteSuggestion[];\n}\n\ninterface DispatchProps {\n  readonly changePlaceSearch: (searchTerm: string) => void;\n  readonly fetchProperties: () => void;\n  readonly goToProperty: (id: string) => void;\n  readonly onFilterChange: (name: string) => (val: string, modifier: FilterModifier) => void;\n  readonly onLocationChange: (value: string) => void;\n  readonly onPinClicked: (id: string) => void;\n  readonly onListPropertyEnter: (id: string) => void;\n  readonly onListPropertyLeave: (id: string) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\nexport class PlpContainer extends React.Component<Props> {\n  public componentDidUpdate(prevProps: Props) {\n    const newSearch = this.props.location.search;\n    const newPath = this.props.location.pathname;\n    if (newSearch !== prevProps.location.search || newPath !== prevProps.location.pathname) {\n      this.props.fetchProperties();\n    }\n  }\n\n  public componentDidMount() {\n    this.props.fetchProperties();\n  }\n\n  public render() {\n    return <PLP {...this.props} />;\n  }\n}\n\nexport const mapStateToProps = (state: State): StateProps => ({\n  area: areaSelector(state),\n  filters: conditionalFiltersSelector(state),\n  initialSearchLocation: initialSearchLocationSelector(state),\n  location: locationSelector(state),\n  properties: propertiesSearchResultsSelector(state),\n  resultCount: resultCountSelector(state),\n  status: plpPropertyRequestStatusSelector(state),\n  suggestions: locationLookupSuggestionsSelector(state),\n});\n\nexport const mapDispatchToProps = (dispatch: Function): DispatchProps => ({\n  changePlaceSearch: (searchTerm: string) => dispatch(lookupPlaceByName(searchTerm)),\n  fetchProperties: () => dispatch(fetchProperties()),\n  goToProperty: (id: string) => dispatch(navigateToProperty(id)),\n  onFilterChange: name => (val, modifier) => dispatch(handleFilterChange(name, val, modifier)),\n  onLocationChange: (value: string) => dispatch(updateUrlWithSelectedLocation(value)),\n  onPinClicked: (id: string) => dispatch(onPinClicked(id)),\n  onListPropertyEnter: (id: string) => dispatch(onPropertyEnter(id)),\n  onListPropertyLeave: (id: string) => dispatch(onPropertyLeave(id)),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PlpContainer);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}