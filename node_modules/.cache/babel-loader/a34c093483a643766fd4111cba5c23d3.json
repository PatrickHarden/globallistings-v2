{"ast":null,"code":"import _classCallCheck from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/zentoo/Code/v2/src/components/validator/validator.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\n\n/**\n * This is a HOC which abstracts the logic of triggering actions until we get to the valid state and the render wrapped component\n * @param validator a validator object which will be used to validate if this component can be rendered.\n * isValid will be determined to check if we can render the component. Validate will be used to trigger action to\n * make component valid\n */\nexport var withValidation = function withValidation(validator) {\n  return function (Component) {\n    var WithValidation = /*#__PURE__*/function (_React$Component) {\n      _inherits(WithValidation, _React$Component);\n\n      var _super = _createSuper(WithValidation);\n\n      function WithValidation() {\n        _classCallCheck(this, WithValidation);\n\n        return _super.apply(this, arguments);\n      }\n\n      _createClass(WithValidation, [{\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate() {\n          if (!this.props.isValid) {\n            this.props.validate();\n          }\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          if (!this.props.isValid) {\n            this.props.validate();\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          // TODO add ability to pass a spinner component\n          return this.props.isValid ? /*#__PURE__*/React.createElement(Component, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 35\n            }\n          }) : 'running validation';\n        }\n      }]);\n\n      return WithValidation;\n    }(React.Component);\n\n    var mapStateToProps = function mapStateToProps(state) {\n      return {\n        isValid: validator.isValid(state)\n      };\n    };\n\n    var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n      return {\n        validate: function validate() {\n          return dispatch(validator.validate());\n        }\n      };\n    };\n\n    return connect(mapStateToProps, mapDispatchToProps)(WithValidation);\n  };\n};","map":{"version":3,"names":["React","connect","withValidation","validator","Component","WithValidation","props","isValid","validate","mapStateToProps","state","mapDispatchToProps","dispatch"],"sources":["/Users/zentoo/Code/v2/src/components/validator/validator.tsx"],"sourcesContent":["import React from 'react';\nimport { State } from '../../types/state';\nimport { connect } from 'react-redux';\n\ninterface StateProps {\n  readonly isValid: boolean;\n}\n\ninterface DispatchProps {\n  readonly validate: () => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface Validator {\n  readonly isValid: (state: State) => boolean;\n  readonly validate: () => (dispatch: Function, getState: () => State) => void;\n}\n\n/**\n * This is a HOC which abstracts the logic of triggering actions until we get to the valid state and the render wrapped component\n * @param validator a validator object which will be used to validate if this component can be rendered.\n * isValid will be determined to check if we can render the component. Validate will be used to trigger action to\n * make component valid\n */\nexport const withValidation = (validator: Validator) => (Component: React.ComponentType) => {\n  class WithValidation extends React.Component<Props> {\n    public componentDidUpdate() {\n      if (!this.props.isValid) {\n        this.props.validate();\n      }\n    }\n\n    public componentDidMount() {\n      if (!this.props.isValid) {\n        this.props.validate();\n      }\n    }\n\n    public render() {\n      // TODO add ability to pass a spinner component\n      return this.props.isValid ? <Component /> : 'running validation';\n    }\n  }\n\n  const mapStateToProps = (state: State): StateProps => ({\n    isValid: validator.isValid(state),\n  });\n\n  const mapDispatchToProps = (dispatch: Function): DispatchProps => ({\n    validate: () => dispatch(validator.validate()),\n  });\n\n  return connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(WithValidation);\n};\n"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,OAAT,QAAwB,aAAxB;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,SAAD;EAAA,OAA0B,UAACC,SAAD,EAAoC;IAAA,IACpFC,cADoF;MAAA;;MAAA;;MAAA;QAAA;;QAAA;MAAA;;MAAA;QAAA;QAAA,OAExF,8BAA4B;UAC1B,IAAI,CAAC,KAAKC,KAAL,CAAWC,OAAhB,EAAyB;YACvB,KAAKD,KAAL,CAAWE,QAAX;UACD;QACF;MANuF;QAAA;QAAA,OAQxF,6BAA2B;UACzB,IAAI,CAAC,KAAKF,KAAL,CAAWC,OAAhB,EAAyB;YACvB,KAAKD,KAAL,CAAWE,QAAX;UACD;QACF;MAZuF;QAAA;QAAA,OAcxF,kBAAgB;UACd;UACA,OAAO,KAAKF,KAAL,CAAWC,OAAX,gBAAqB,oBAAC,SAAD;YAAA;YAAA;cAAA;cAAA;cAAA;YAAA;UAAA,EAArB,GAAqC,oBAA5C;QACD;MAjBuF;;MAAA;IAAA,EAC7DP,KAAK,CAACI,SADuD;;IAoB1F,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD;MAAA,OAA+B;QACrDH,OAAO,EAAEJ,SAAS,CAACI,OAAV,CAAkBG,KAAlB;MAD4C,CAA/B;IAAA,CAAxB;;IAIA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD;MAAA,OAAwC;QACjEJ,QAAQ,EAAE;UAAA,OAAMI,QAAQ,CAACT,SAAS,CAACK,QAAV,EAAD,CAAd;QAAA;MADuD,CAAxC;IAAA,CAA3B;;IAIA,OAAOP,OAAO,CACZQ,eADY,EAEZE,kBAFY,CAAP,CAGLN,cAHK,CAAP;EAID,CAhC6B;AAAA,CAAvB"},"metadata":{},"sourceType":"module"}