{"ast":null,"code":"import _objectSpread from \"/Users/zentoo/Code/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { createStore, compose, applyMiddleware, combineReducers } from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport thunkMiddleware from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport reducers from '../redux/reducers';\nimport { identity } from 'ramda';\n\nvar createReducers = function createReducers(history) {\n  return combineReducers(_objectSpread({\n    router: connectRouter(history)\n  }, reducers));\n};\n/* istanbul ignore next */\n\n\nvar allowDebugging = process.env.NODE_ENV !== 'production' || localStorage && localStorage.getItem('reactDebug') === 'yes';\n\nvar analytics = function analytics(_ref) {\n  var getState = _ref.getState;\n  return function (next) {\n    return function (action) {\n      if (action.analytics) {\n        var state = getState().app;\n        window.dataLayer = window.dataLayer || [];\n        window.dataLayer.push({\n          event: action.type,\n          data: action.analytics,\n          siteInfo: {\n            locale: state.language ? state.language.locale : '',\n            siteId: state.params ? state.params.params.Site : '',\n            siteType: state.siteType\n          }\n        });\n      }\n\n      return next(action);\n    };\n  };\n};\n\nvar buildStore = function buildStore(initialState, history) {\n  /*  eslint-disable no-underscore-dangle */\n  var devToolsExt = allowDebugging && window.devToolsExtension ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() : identity;\n  var middleWare = allowDebugging ? applyMiddleware(routerMiddleware(history), analytics, thunkMiddleware, createLogger()) : applyMiddleware(routerMiddleware(history), analytics, thunkMiddleware);\n  var store = createStore(createReducers(history), initialState, compose(middleWare, devToolsExt));\n  return store;\n};\n\nexport default buildStore;","map":{"version":3,"names":["createStore","compose","applyMiddleware","combineReducers","connectRouter","routerMiddleware","thunkMiddleware","createLogger","reducers","identity","createReducers","history","router","allowDebugging","process","env","NODE_ENV","localStorage","getItem","analytics","getState","next","action","state","app","window","dataLayer","push","event","type","data","siteInfo","locale","language","siteId","params","Site","siteType","buildStore","initialState","devToolsExt","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","middleWare","store"],"sources":["/Users/zentoo/Code/v2/src/app/createStore.ts"],"sourcesContent":["import { createStore, compose, applyMiddleware, combineReducers } from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport thunkMiddleware from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport reducers from '../redux/reducers';\nimport { identity } from 'ramda';\nimport { History } from 'history';\nimport { DeepPartial } from '../types/common/deep-partial';\nimport { State } from '../types/state';\n\nconst createReducers = (history: History) =>\n  combineReducers({\n    router: connectRouter(history),\n    ...reducers,\n  });\n\n/* istanbul ignore next */\nconst allowDebugging =\n  process.env.NODE_ENV !== 'production' ||\n  (localStorage && localStorage.getItem('reactDebug') === 'yes');\n\nconst analytics = ({ getState }: any) => (next: any) => (action: any) => {\n  if (action.analytics) {\n    const state = getState().app;\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push({\n      event: action.type,\n      data: action.analytics,\n      siteInfo: {\n        locale: state.language ? state.language.locale : '',\n        siteId: state.params ? state.params.params.Site : '',\n        siteType: state.siteType,\n      },\n    });\n  }\n\n  return next(action);\n};\n\nconst buildStore = (initialState: DeepPartial<State>, history: History) => {\n  /*  eslint-disable no-underscore-dangle */\n  const devToolsExt =\n    allowDebugging && window.devToolsExtension\n      ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n      : identity;\n\n  const middleWare = allowDebugging\n    ? applyMiddleware(routerMiddleware(history), analytics, thunkMiddleware, createLogger())\n    : applyMiddleware(routerMiddleware(history), analytics, thunkMiddleware);\n\n  const store = createStore(\n    createReducers(history),\n    initialState as any,\n    compose(\n      middleWare,\n      devToolsExt\n    )\n  );\n\n  return store;\n};\nexport default buildStore;\n"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,OAAtB,EAA+BC,eAA/B,EAAgDC,eAAhD,QAAuE,OAAvE;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,wBAAhD;AACA,OAAOC,eAAP,MAA4B,aAA5B;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAASC,QAAT,QAAyB,OAAzB;;AAKA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD;EAAA,OACrBR,eAAe;IACbS,MAAM,EAAER,aAAa,CAACO,OAAD;EADR,GAEVH,QAFU,EADM;AAAA,CAAvB;AAMA;;;AACA,IAAMK,cAAc,GAClBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IACCC,YAAY,IAAIA,YAAY,CAACC,OAAb,CAAqB,YAArB,MAAuC,KAF1D;;AAIA,IAAMC,SAAS,GAAG,SAAZA,SAAY;EAAA,IAAGC,QAAH,QAAGA,QAAH;EAAA,OAAuB,UAACC,IAAD;IAAA,OAAe,UAACC,MAAD,EAAiB;MACvE,IAAIA,MAAM,CAACH,SAAX,EAAsB;QACpB,IAAMI,KAAK,GAAGH,QAAQ,GAAGI,GAAzB;QACAC,MAAM,CAACC,SAAP,GAAmBD,MAAM,CAACC,SAAP,IAAoB,EAAvC;QACAD,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB;UACpBC,KAAK,EAAEN,MAAM,CAACO,IADM;UAEpBC,IAAI,EAAER,MAAM,CAACH,SAFO;UAGpBY,QAAQ,EAAE;YACRC,MAAM,EAAET,KAAK,CAACU,QAAN,GAAiBV,KAAK,CAACU,QAAN,CAAeD,MAAhC,GAAyC,EADzC;YAERE,MAAM,EAAEX,KAAK,CAACY,MAAN,GAAeZ,KAAK,CAACY,MAAN,CAAaA,MAAb,CAAoBC,IAAnC,GAA0C,EAF1C;YAGRC,QAAQ,EAAEd,KAAK,CAACc;UAHR;QAHU,CAAtB;MASD;;MAED,OAAOhB,IAAI,CAACC,MAAD,CAAX;IACD,CAhBwC;EAAA,CAAvB;AAAA,CAAlB;;AAkBA,IAAMgB,UAAU,GAAG,SAAbA,UAAa,CAACC,YAAD,EAAmC5B,OAAnC,EAAwD;EACzE;EACA,IAAM6B,WAAW,GACf3B,cAAc,IAAIY,MAAM,CAACgB,iBAAzB,GACIhB,MAAM,CAACiB,4BAAP,IAAuCjB,MAAM,CAACiB,4BAAP,EAD3C,GAEIjC,QAHN;EAKA,IAAMkC,UAAU,GAAG9B,cAAc,GAC7BX,eAAe,CAACG,gBAAgB,CAACM,OAAD,CAAjB,EAA4BQ,SAA5B,EAAuCb,eAAvC,EAAwDC,YAAY,EAApE,CADc,GAE7BL,eAAe,CAACG,gBAAgB,CAACM,OAAD,CAAjB,EAA4BQ,SAA5B,EAAuCb,eAAvC,CAFnB;EAIA,IAAMsC,KAAK,GAAG5C,WAAW,CACvBU,cAAc,CAACC,OAAD,CADS,EAEvB4B,YAFuB,EAGvBtC,OAAO,CACL0C,UADK,EAELH,WAFK,CAHgB,CAAzB;EASA,OAAOI,KAAP;AACD,CArBD;;AAsBA,eAAeN,UAAf"},"metadata":{},"sourceType":"module"}